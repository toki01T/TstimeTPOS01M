<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T's time - 値札印刷システム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <button class="hamburger-menu" id="hamburgerMenu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1>T's time</h1>
        </header>

        <!-- サイドメニュー -->
        <div class="side-menu" id="sideMenu">
            <div class="side-menu-header">
                <h3>メニュー</h3>
                <button class="close-menu" id="closeMenu">×</button>
            </div>
            <div class="side-menu-content">
                <div class="menu-item">
                    <label for="menuSerialNumber">連番設定:</label>
                    <input type="number" id="menuSerialNumber" placeholder="連番を入力">
                    <button id="setSerialNumber" class="menu-button">設定</button>
                </div>
                <div class="menu-item">
                    <button id="resetSerialNumber" class="menu-button-secondary">連番をリセット</button>
                </div>
                <div class="menu-item">
                    <p class="menu-info">現在の連番: <span id="currentSerial">1</span></p>
                </div>
            </div>
        </div>
        <div class="overlay" id="overlay"></div>

        <main>
            <div class="form-section">
                <h2>値札作成</h2>
                
                <div class="form-group">
                    <label for="serialNumber">連番:</label>
                    <input type="number" id="serialNumber" placeholder="例: 1" value="1">
                </div>

                <div class="form-group">
                    <label for="modelNumber">型番:</label>
                    <input type="text" id="modelNumber" placeholder="例: ABC-123" maxlength="70">
                </div>

                <div class="form-group">
                    <label for="operationType">稼働方式:</label>
                    <select id="operationType">
                        <option value="クォーツ「稼働」">クォーツ「稼働」</option>
                        <option value="クォーツ「未稼働」">クォーツ「未稼働」</option>
                        <option value="クォーツ「不動」">クォーツ「不動」</option>
                        <option value="ソーラー「稼働」">ソーラー「稼働」</option>
                        <option value="ソーラー「未稼働」">ソーラー「未稼働」</option>
                        <option value="ソーラー「不動」">ソーラー「不動」</option>
                        <option value="自動巻き「稼働」">自動巻き「稼働」</option>
                        <option value="自動巻き「未稼働」">自動巻き「未稼働」</option>
                        <option value="自動巻き「不動」">自動巻き「不動」</option>
                        <option value="キネティック(自動巻発電式ｸｫｰﾂ)「稼働」">キネティック(自動巻発電式ｸｫｰﾂ)「稼働」</option>
                        <option value="キネティック(自動巻発電式ｸｫｰﾂ)「未稼働」">キネティック(自動巻発電式ｸｫｰﾂ)「未稼働」</option>
                        <option value="キネティック(自動巻発電式ｸｫｰﾂ)「不動」">キネティック(自動巻発電式ｸｫｰﾂ)「不動」</option>
                        <option value="other">その他（自由記入）</option>
                    </select>
                </div>

                <div class="form-group" id="otherOperationGroup" style="display: none;">
                    <label for="otherOperation">その他の稼働方式:</label>
                    <input type="text" id="otherOperation" placeholder="稼働方式を入力" maxlength="30">
                </div>

                <div class="form-group">
                    <label for="purchasePrice">購入価格:</label>
                    <input type="number" id="purchasePrice" placeholder="例: 5000">
                </div>

                <div class="form-group">
                    <label for="batteryCost">電池代:</label>
                    <input type="number" id="batteryCost" placeholder="例: 300">
                </div>

                <div class="form-group">
                    <label for="beltCost">ベルト代:</label>
                    <input type="number" id="beltCost" placeholder="例: 500">
                </div>

                <div class="form-group">
                    <label for="desiredPrice">希望金額:</label>
                    <input type="number" id="desiredPrice" placeholder="例: 8000">
                </div>

            </div>

            <div class="preview-section">
                <h2>プレビュー</h2>
                <div class="preview-card" id="preview">
                    <div class="preview-header-line">
                        <span class="store-name">T's time</span>
                        <span class="serial-number" id="previewSerial">00001</span>
                    </div>
                    
                    <div class="preview-model" id="previewModel">-</div>
                    
                    <div class="preview-operation" id="previewOperation">-</div>
                    
                    <div class="preview-line">
                        <span class="label">購入価格</span>
                        <span class="value" id="previewPurchase">￥-</span>
                    </div>
                    
                    <div class="preview-line">
                        <span class="label">電池代</span>
                        <span class="value" id="previewBattery">￥-</span>
                    </div>
                    
                    <div class="preview-line">
                        <span class="label">ベルト代</span>
                        <span class="value" id="previewBelt">￥-</span>
                    </div>
                    
                    <div class="preview-desired-price">
                        <div class="label">希望金額</div>
                        <div class="value" id="previewPrice">￥-</div>
                    </div>
                    
                    <div class="preview-datetime" id="previewDate">-</div>
                    
                    <div class="barcode-section">
                        <svg id="barcode"></svg>
                        <div class="barcode-text" id="barcodeText">-</div>
                    </div>
                </div>
            </div>

            <div class="button-section">
                <button id="printBtn" class="btn-primary">印刷</button>
                <button id="clearBtn" class="btn-secondary">クリア</button>
            </div>

            <div id="statusMessage" class="status-message"></div>
        </main>
    </div>

    <script>
        // ePOS-Print SDKのロードエラーを処理
        window.epsonSDKLoaded = false;
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="epos-2.27.0.js" onerror="console.warn('ePOS SDK not loaded')"></script>
    <script src="app.js"></script>
</body>
</html>
