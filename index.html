<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T's time - 値札印刷システム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <button class="hamburger-menu" id="hamburgerMenu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1>T's time</h1>
        </header>

        <!-- サイドメニュー -->
        <div class="side-menu" id="sideMenu">
            <div class="side-menu-header">
                <h3>メニュー</h3>
                <button class="close-menu" id="closeMenu">×</button>
            </div>
            <div class="side-menu-content">
                <div class="menu-item">
                    <label for="menuSerialNumber">連番設定:</label>
                    <input type="number" id="menuSerialNumber" placeholder="連番を入力">
                    <button id="setSerialNumber" class="menu-button">設定</button>
                </div>
                <div class="menu-item">
                    <button id="resetSerialNumber" class="menu-button-secondary">連番をリセット</button>
                </div>
                <div class="menu-item">
                    <p class="menu-info">現在の連番: <span id="currentSerial">1</span></p>
                </div>
                <div class="menu-item">
                    <label for="printerSelect">プリンター選択:</label>
                    <select id="printerSelect" class="printer-select">
                        <option value="TM-m10">TM-m10</option>
                        <option value="TM-m30">TM-m30</option>
                        <option value="TM-P20">TM-P20</option>
                        <option value="TM-P60II">TM-P60II</option>
                        <option value="TM-P80">TM-P80</option>
                        <option value="TM-T20">TM-T20</option>
                        <option value="TM-T60">TM-T60</option>
                        <option value="TM-T70">TM-T70</option>
                        <option value="TM-T81">TM-T81</option>
                        <option value="TM-T82">TM-T82</option>
                        <option value="TM-T83">TM-T83</option>
                        <option value="TM-T88">TM-T88</option>
                        <option value="TM-T90">TM-T90</option>
                        <option value="TM-T100">TM-T100</option>
                        <option value="TM-U220">TM-U220</option>
                        <option value="TM-L90">TM-L90</option>
                        <option value="TM-H6000">TM-H6000</option>
                    </select>
                    <small class="input-hint">使用するプリンターを選択してください</small>
                </div>
                <div class="menu-item">
                    <button id="showHistory" class="menu-button">履歴を表示</button>
                </div>
            </div>
        </div>
        <div class="overlay" id="overlay"></div>

        <!-- 履歴表示モーダル -->
        <div class="history-modal" id="historyModal">
            <div class="history-modal-content">
                <div class="history-modal-header">
                    <h3>印刷履歴</h3>
                    <button class="close-history" id="closeHistory">×</button>
                </div>
                <div class="history-list" id="historyList">
                    <!-- 履歴がここに動的に追加されます -->
                </div>
            </div>
        </div>

        <main>
            <div class="form-section">
                <h2>値札作成</h2>
                
                <div class="form-group">
                    <label for="categoryType">カテゴリー:</label>
                    <select id="categoryType">
                        <option value="メンズ腕時計">メンズ腕時計</option>
                        <option value="ボーイズ腕時計">ボーイズ腕時計</option>
                        <option value="レディース腕時計">レディース腕時計</option>
                        <option value="other">その他（自由記入）</option>
                    </select>
                </div>

                <div class="form-group" id="otherCategoryGroup" style="display: none;">
                    <label for="otherCategory">その他のカテゴリー:</label>
                    <input type="text" id="otherCategory" placeholder="カテゴリーを入力" maxlength="30">
                </div>

                <div class="form-group">
                    <label for="modelNumber">型番:</label>
                    <textarea id="modelNumber" placeholder="例: ABC-123" maxlength="51" rows="3"></textarea>
                    <small class="input-hint">17文字で自動改行されます（最大3行）</small>
                </div>

                <div class="form-group">
                    <label for="operationType">稼働方式:</label>
                    <select id="operationType">
                        <option value="クォーツ「稼働」">クォーツ「稼働」</option>
                        <option value="クォーツ「未稼働」">クォーツ「未稼働」</option>
                        <option value="クォーツ「不動」">クォーツ「不動」</option>
                        <option value="ソーラー「稼働」">ソーラー「稼働」</option>
                        <option value="ソーラー「未稼働」">ソーラー「未稼働」</option>
                        <option value="ソーラー「不動」">ソーラー「不動」</option>
                        <option value="ソーラー電波「稼働」">ソーラー電波「稼働」</option>
                        <option value="ソーラー電波「未稼働」">ソーラー電波「未稼働」</option>
                        <option value="ソーラー電波「不動」">ソーラー電波「不動」</option>
                        <option value="自動巻き「稼働」">自動巻き「稼働」</option>
                        <option value="自動巻き「未稼働」">自動巻き「未稼働」</option>
                        <option value="自動巻き「不動」">自動巻き「不動」</option>
                        <option value="キネティック(自動巻発電式ｸｫｰﾂ)「稼働」">キネティック(自動巻発電式ｸｫｰﾂ)「稼働」</option>
                        <option value="キネティック(自動巻発電式ｸｫｰﾂ)「未稼働」">キネティック(自動巻発電式ｸｫｰﾂ)「未稼働」</option>
                        <option value="キネティック(自動巻発電式ｸｫｰﾂ)「不動」">キネティック(自動巻発電式ｸｫｰﾂ)「不動」</option>
                        <option value="other">その他（自由記入）</option>
                    </select>
                </div>

                <div class="form-group" id="otherOperationGroup" style="display: none;">
                    <label for="otherOperation">その他の稼働方式:</label>
                    <input type="text" id="otherOperation" placeholder="稼働方式を入力" maxlength="30">
                </div>

                <div class="form-group">
                    <label for="purchasePrice">購入価格:</label>
                    <input type="number" id="purchasePrice" placeholder="例: 5000">
                </div>

                <div class="form-group">
                    <label for="batteryCost">電池代:</label>
                    <input type="number" id="batteryCost" placeholder="例: 300">
                </div>

                <div class="form-group">
                    <label for="beltCost">ベルト代:</label>
                    <input type="number" id="beltCost" placeholder="例: 500">
                </div>

                <div class="form-group">
                    <label for="desiredPrice">金額:</label>
                    <input type="number" id="desiredPrice" placeholder="例: 8000">
                </div>

                <div class="form-group toggle-group">
                    <label class="toggle-label">
                        <span class="toggle-text">離れ印刷</span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="printNotice" checked>
                            <span class="toggle-slider"></span>
                        </div>
                    </label>
                    <small class="toggle-hint">※大幅に金額が離れている場合はお売りする事が出来ません。ご了承下さい。</small>
                </div>

            </div>

            <div class="button-section">
                <button id="printBtn" class="btn-primary">印刷</button>
                <button id="clearBtn" class="btn-secondary">クリア</button>
            </div>

            <div id="statusMessage" class="status-message"></div>
        </main>
    </div>

    <script>
        // ePOS-Print SDKのロードエラーを処理
        window.epsonSDKLoaded = false;
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="epos-2.27.0.js" onerror="console.warn('ePOS SDK not loaded')"></script>
    <script src="app.js"></script>
</body>
</html>
